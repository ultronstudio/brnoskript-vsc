{
  "scopeName": "source.brnoskript",
  "name": "BrnoSkript",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#terminator" },
    { "include": "#keywords" },
    { "include": "#function-decl" },
    { "include": "#function-expr" },
    { "include": "#builtins" },
    { "include": "#member-access" },
    { "include": "#operators" },
    { "include": "#punctuation" },
    { "include": "#identifiers" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        { "name": "comment.line.double-slash.brnoskript", "match": "//.*$" },
        {
          "name": "comment.block.brnoskript",
          "begin": "/\\*",
          "end": "\\*/",
          "patterns": [{ "include": "#comments" }]
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.brnoskript",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            { "name": "constant.character.escape.brnoskript", "match": "\\\\." }
          ]
        }
      ]
    },
    "numbers": {
      "patterns": [
        { "name": "constant.numeric.brnoskript", "match": "\\b\\d+(?:\\.\\d+)?\\b" }
      ]
    },
    "terminator": {
      "patterns": [
        { "name": "punctuation.terminator.brnoskript", "match": "\\bpiča\\b" }
      ]
    },
    "keywords": {
      "patterns": [
        {
          "name": "keyword.control.brnoskript",
          "match": "\\b(?:nech|esli|inak|šalina|okruh|vrat|vokno|zkus|chyť|potom|vypadni|přeskoč)\\b"
        },
        { "name": "storage.type.function.brnoskript", "match": "\\brob\\b" },
        { "name": "constant.language.boolean.brnoskript", "match": "\\b(?:rožni|zhasni)\\b" },
        { "name": "constant.language.null.brnoskript", "match": "\\bnull\\b" }
      ]
    },
    "function-decl": {
      "patterns": [
        {
          "name": "meta.function.declaration.brnoskript",
          "begin": "\\brob\\s+([A-Za-z_\\p{L}][A-Za-z0-9_\\p{L}\\p{N}]*)\\s*\\(",
          "beginCaptures": { "1": { "name": "entity.name.function.brnoskript" } },
          "end": "\\)",
          "patterns": [{ "include": "#parameters" }]
        }
      ]
    },
    "function-expr": {
      "patterns": [
        {
          "name": "meta.function.expr.brnoskript",
          "begin": "\\brob\\s*\\(",
          "end": "\\)",
          "patterns": [{ "include": "#parameters" }]
        }
      ]
    },
    "parameters": {
      "patterns": [
        { "name": "variable.parameter.brnoskript", "match": "[A-Za-z_\\p{L}][A-Za-z0-9_\\p{L}\\p{N}]*" },
        { "name": "punctuation.separator.parameter.brnoskript", "match": "," }
      ]
    },
    "builtins": {
      "patterns": [
        {
          "name": "support.namespace.brnoskript",
          "match": "\\b(?:text|šalát|mapa|matyš|čas|regl|krypto|šichta|šufle|šmirgl)\\b"
        },
        {
          "name": "support.function.builtin.brnoskript",
          "match": "\\b(?:vyblij|řekni|pisni|typ|házej|fčil)\\b(?=\\s*\\()"
        }
      ]
    },
    "member-access": {
      "patterns": [
        { "name": "punctuation.accessor.dot.brnoskript", "match": "\\." },
        {
          "name": "support.function.member.brnoskript",
          "match": "(?x)(?<=\\.|\\b)(?:\n  díl|nahrad|malý|velký|řež|spojuj|trim|obsahuje|zacina|končí|formátujDatum|\n  je|vem|hoď|sekni|otoč|seřaď|mapuj|filtruj|spočítej|placka|dl|\n  vytvor|keys|values|páry|spojit|\n  moc|kořen|pod|nad|abs|kolo|sin|cos|tan|min|max|náhoda|náhodaMezi|\n  teď|formát|usni|odměř|\n  najdi|všeci|nahrad|\n  uuid|base64|zbase64|sha256|\n  argv|env|konec|\n  čti|piš|seznam|info|\n  typy\n)\\b(?=\\s*\\()"
        }
      ]
    },
    "operators": {
      "patterns": [
        { "name": "keyword.operator.logical.brnoskript", "match": "&&|\\|\\||\\?\\?" },
        { "name": "keyword.operator.comparison.brnoskript", "match": "==|!=|<=|>=|<|>" },
        { "name": "keyword.operator.assignment.compound.brnoskript", "match": "\\+=|\\-=|\\*=|\\/=|%=" },
        { "name": "keyword.operator.increment-decrement.brnoskript", "match": "\\+\\+|--" },
        { "name": "keyword.operator.arithmetic.brnoskript", "match": "\\*\\*|\\+|\\-|\\*|\\/|%" },
        { "name": "keyword.operator.unary.brnoskript", "match": "!" },
        { "name": "keyword.operator.assignment.brnoskript", "match": "=" }
      ]
    },
    "punctuation": {
      "patterns": [
        { "name": "punctuation.separator.comma.brnoskript", "match": "," },
        { "name": "punctuation.separator.colon.brnoskript", "match": ":" },
        { "name": "punctuation.section.brace.begin.brnoskript", "match": "\\{" },
        { "name": "punctuation.section.brace.end.brnoskript", "match": "\\}" },
        { "name": "punctuation.section.bracket.begin.brnoskript", "match": "\\[" },
        { "name": "punctuation.section.bracket.end.brnoskript", "match": "\\]" },
        { "name": "punctuation.section.parens.begin.brnoskript", "match": "\\(" },
        { "name": "punctuation.section.parens.end.brnoskript", "match": "\\)" }
      ]
    },
    "identifiers": {
      "patterns": [
        {
          "name": "variable.other.readwrite.brnoskript",
          "match": "\\b[A-Za-z_\\p{L}][A-Za-z0-9_\\p{L}\\p{N}]*\\b"
        }
      ]
    }
  },
  "injectionSelector": "L:source.brnoskript"
}
